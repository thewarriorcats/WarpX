(M={}).parent=Game.Objects.Temple,M.parent.minigame=M,M.launch=function(){var e=this;e.name=e.parent.minigameName,e.init=function(s){e.gods={asceticism:{name:"Holobore, Spirit of Asceticism",icon:[21,18],desc1:'<span class="green">+15% base CpS.</span>',desc2:'<span class="green">+10% base CpS.</span>',desc3:'<span class="green">+5% base CpS.</span>',descAfter:'<span class="red">If a golden cookie is clicked, this spirit is unslotted and all worship swaps will be used up.</span>',quote:"An immortal life spent focusing on the inner self, away from the distractions of material wealth."},decadence:{name:"Vomitrax, Spirit of Decadence",icon:[22,18],desc1:'<span class="green">Golden and wrath cookie effect duration +7%,</span> <span class="red">but buildings grant -7% CpS.</span>',desc2:'<span class="green">Golden and wrath cookie effect duration +5%,</span> <span class="red">but buildings grant -5% CpS.</span>',desc3:'<span class="green">Golden and wrath cookie effect duration +2%,</span> <span class="red">but buildings grant -2% CpS.</span>',quote:"This sleazy spirit revels in the lust for quick easy gain and contempt for the value of steady work."},ruin:{name:"Godzamok, Spirit of Ruin",icon:[23,18],descBefore:'<span class="green">Selling buildings triggers a buff boosted by how many buildings were sold.</span>',desc1:'<span class="green">Buff boosts clicks by +1% for every building sold for 10 seconds.</span>',desc2:'<span class="green">Buff boosts clicks by +0.5% for every building sold for 10 seconds.</span>',desc3:'<span class="green">Buff boosts clicks by +0.25% for every building sold for 10 seconds.</span>',quote:"The embodiment of natural disasters. An impenetrable motive drives the devastation caused by this spirit."},ages:{name:"Cyclius, Spirit of Ages",icon:[24,18],activeDescFunc:function(){var e=Game.hasGod("ages"),s=1;return 1==e?s*=.15*Math.sin(Date.now()/1e3/10800*Math.PI*2):2==e?s*=.15*Math.sin(Date.now()/1e3/43200*Math.PI*2):3==e&&(s*=.15*Math.sin(Date.now()/1e3/86400*Math.PI*2)),"Current bonus : "+(s<0?"-":"+")+Beautify(100*Math.abs(s),2)+"%."},descBefore:'CpS bonus fluctuating between <span class="green">+15%</span> and <span class="red">-15%</span> over time.',desc1:"Effect cycles over 3 hours.",desc2:"Effect cycles over 12 hours.",desc3:"Effect cycles over 24 hours.",quote:"This spirit knows about everything you'll ever do, and enjoys dispensing a harsh judgement."},seasons:{name:"Selebrak, Spirit of Festivities",icon:[25,18],descBefore:'<span class="green">Some seasonal effects are boosted.</span>',desc1:'<span class="green">Large boost.</span> <span class="red">Switching seasons is 100% pricier.</span>',desc2:'<span class="green">Medium boost.</span> <span class="red">Switching seasons is 50% pricier.</span>',desc3:'<span class="green">Small boost.</span> <span class="red">Switching seasons is 25% pricier.</span>',quote:"This is the spirit of merry getaways and regretful Monday mornings."},creation:{name:"Dotjeiess, Spirit of Creation",icon:[26,18],desc1:'<span class="green">Buildings are 7% cheaper,</span> <span class="red">but heavenly chips have 30% less effect.</span>',desc2:'<span class="green">Buildings are 5% cheaper,</span> <span class="red">but heavenly chips have 20% less effect.</span>',desc3:'<span class="green">Buildings are 2% cheaper,</span> <span class="red">but heavenly chips have 10% less effect.</span>',quote:"All things that be and ever will be were scripted long ago by this spirit's inscrutable tendrils."},labor:{name:"Muridal, Spirit of Labor",icon:[27,18],desc1:'<span class="green">Clicks are 15% more powerful,</span> <span class="red">but buildings produce 3% less.</span>',desc2:'<span class="green">Clicks are 10% more powerful,</span> <span class="red">but buildings produce 2% less.</span>',desc3:'<span class="green">Clicks are 5% more powerful,</span> <span class="red">but buildings produce 1% less.</span>',quote:"This spirit enjoys a good cheese after a day of hard work."},industry:{name:"Jeremy, Spirit of Industry",icon:[28,18],desc1:'<span class="green">Buildings produce 10% more cookies,</span> <span class="red">but golden and wrath cookies appear 10% less.</span>',desc2:'<span class="green">Buildings produce 6% more cookies,</span> <span class="red">but golden and wrath cookies appear 6% less.</span>',desc3:'<span class="green">Buildings produce 3% more cookies,</span> <span class="red">but golden and wrath cookies appear 3% less.</span>',quote:"While this spirit has many regrets, helping you rule the world through constant industrialization is not one of them."},mother:{name:"Mokalsium, Mother Spirit",icon:[29,18],desc1:'<span class="green">Milk is 10% more powerful,</span> <span class="red">but golden and wrath cookies appear 15% less.</span>',desc2:'<span class="green">Milk is 5% more powerful,</span> <span class="red">but golden and wrath cookies appear 10% less.</span>',desc3:'<span class="green">Milk is 3% more powerful,</span> <span class="red">but golden and wrath cookies appear 5% less.</span>',quote:"A caring spirit said to contain itself, inwards infinitely."},scorn:{name:"Skruuia, Spirit of Scorn",icon:[21,19],descBefore:'<span class="red">All golden cookies are wrath cookies with a greater chance of a negative effect.</span>',desc1:'<span class="green">Wrinklers appear 150% faster and digest 15% more cookies.</span>',desc2:'<span class="green">Wrinklers appear 100% faster and digest 10% more cookies.</span>',desc3:'<span class="green">Wrinklers appear 50% faster and digest 5% more cookies.</span>',quote:"This spirit enjoys poking foul beasts and watching them squirm, but has no love for its own family."},order:{name:"Rigidel, Spirit of Order",icon:[22,19],activeDescFunc:function(){return Game.BuildingsOwned%10==0?"Buildings owned : "+Beautify(Game.BuildingsOwned)+".<br>Effect is active.":"Buildings owned : "+Beautify(Game.BuildingsOwned)+".<br>Effect is inactive."},desc1:'<span class="green">Sugar lumps ripen an hour sooner.</span>',desc2:'<span class="green">Sugar lumps ripen 40 minutes sooner.</span>',desc3:'<span class="green">Sugar lumps ripen 20 minutes sooner.</span>',descAfter:'<span class="red">Effect is only active when your total amount of buildings ends with 0.</span>',quote:"You will find that life gets just a little bit sweeter if you can motivate this spirit with tidy numbers and properly-filled tax returns."}},e.godsById=[];var t=0;for(var o in e.gods)e.gods[o].id=t,e.gods[o].slot=-1,e.godsById[t]=e.gods[o],t++;e.slot=[],e.slot[0]=-1,e.slot[1]=-1,e.slot[2]=-1,e.slotNames=["Diamond","Ruby","Jade"],e.swaps=3,e.swapT=Date.now(),e.lastSwapT=0,e.godTooltip=function(s){return function(){var t=e.godsById[s];return t.icon=t.icon||[0,0],'<div style="padding:8px 4px;min-width:350px;"><div class="icon" style="float:left;margin-left:-8px;margin-top:-8px;background-position:'+48*-t.icon[0]+"px "+48*-t.icon[1]+'px;"></div><div class="name">'+t.name+'</div><div class="line"></div><div class="description"><div style="margin:6px 0px;font-weight:bold;">Effects :</div>'+(t.descBefore?'<div class="templeEffect">'+t.descBefore+"</div>":"")+(t.desc1?'<div class="templeEffect templeEffect1"><div class="usesIcon shadowFilter templeGem templeGem1"></div>'+t.desc1+"</div>":"")+(t.desc2?'<div class="templeEffect templeEffect2"><div class="usesIcon shadowFilter templeGem templeGem2"></div>'+t.desc2+"</div>":"")+(t.desc3?'<div class="templeEffect templeEffect3"><div class="usesIcon shadowFilter templeGem templeGem3"></div>'+t.desc3+"</div>":"")+(t.descAfter?'<div class="templeEffect">'+t.descAfter+"</div>":"")+(t.quote?"<q>"+t.quote+"</q>":"")+"</div></div>"}},e.slotTooltip=function(s){return function(){if(-1!=e.slot[s]){var t=e.godsById[e.slot[s]];t.icon=t.icon||[0,0]}return'<div style="padding:8px 4px;min-width:350px;">'+(-1!=e.slot[s]?'<div class="name templeEffect" style="margin-bottom:12px;"><div class="usesIcon shadowFilter templeGem templeGem'+(parseInt(s)+1)+'"></div>'+e.slotNames[s]+' slot</div><div class="icon" style="float:left;margin-left:-8px;margin-top:-8px;background-position:'+48*-t.icon[0]+"px "+48*-t.icon[1]+'px;"></div><div class="name">'+t.name+'</div><div class="line"></div><div class="description"><div style="margin:6px 0px;font-weight:bold;">Effects :</div>'+(t.activeDescFunc?'<div class="templeEffect templeEffectOn" style="padding:8px 4px;text-align:center;">'+t.activeDescFunc()+"</div>":"")+(t.descBefore?'<div class="templeEffect">'+t.descBefore+"</div>":"")+(t.desc1?'<div class="templeEffect templeEffect1'+(0==t.slot?" templeEffectOn":"")+'"><div class="usesIcon shadowFilter templeGem templeGem1"></div>'+t.desc1+"</div>":"")+(t.desc2?'<div class="templeEffect templeEffect2'+(1==t.slot?" templeEffectOn":"")+'"><div class="usesIcon shadowFilter templeGem templeGem2"></div>'+t.desc2+"</div>":"")+(t.desc3?'<div class="templeEffect templeEffect3'+(2==t.slot?" templeEffectOn":"")+'"><div class="usesIcon shadowFilter templeGem templeGem3"></div>'+t.desc3+"</div>":"")+(t.descAfter?'<div class="templeEffect">'+t.descAfter+"</div>":"")+(t.quote?"<q>"+t.quote+"</q>":"")+"</div>":'<div class="name templeEffect"><div class="usesIcon shadowFilter templeGem templeGem'+(parseInt(s)+1)+'"></div>'+e.slotNames[s]+' slot (empty)</div><div class="line"></div><div class="description">'+(e.slotHovered==s&&e.dragging?"Release to assign <b>"+e.dragging.name+"</b> to this slot.":"Drag a spirit onto this slot to assign it.")+"</div>")+"</div>"}},e.useSwap=function(s){e.swapT=Date.now(),e.swaps-=s,e.swaps<0&&(e.swaps=0)},e.slotGod=function(s,t){if(t==s.slot)return!1;-1!=t&&-1!=e.slot[t]?(e.godsById[e.slot[t]].slot=s.slot,e.slot[s.slot]=e.slot[t]):-1!=s.slot&&(e.slot[s.slot]=-1),-1!=t&&(e.slot[t]=s.id),s.slot=t,Game.recalculateGains=!0},e.dragging=!1,e.dragGod=function(s){e.dragging=s;var t=l("templeGod"+s.id),o=t.getBoundingClientRect(),a=l("templeDrag").getBoundingClientRect();t.className="ready templeGod titleFont templeDragged",l("templeDrag").appendChild(t);var i=o.left-a.left,n=o.top-a.top;t.style.transform="translate("+i+"px,"+n+"px)",l("templeGodPlaceholder"+e.dragging.id).style.display="inline-block",PlaySound("snd/tick.mp3")},e.dropGod=function(){if(e.dragging){var s=l("templeGod"+e.dragging.id);if(s.className="ready templeGod titleFont",s.style.transform="none",-1==e.slotHovered||0!=e.swaps&&e.dragging.slot!=e.slotHovered)if(-1!=e.slotHovered){e.useSwap(1),e.lastSwapT=0;var t=e.slot[e.slotHovered];if(-1!=t){t=e.godsById[t];var o=l("templeGod"+t.id);if(-1!=e.dragging.slot)l("templeSlot"+e.dragging.slot).appendChild(o);else(i=l("templeGodPlaceholder"+t.id)).parentNode.insertBefore(o,i)}l("templeSlot"+e.slotHovered).appendChild(s),e.slotGod(e.dragging,e.slotHovered),PlaySound("snd/tick.mp3"),PlaySound("snd/spirit.mp3",.5);var a=s.getBoundingClientRect();Game.SparkleAt((a.left+a.right)/2,(a.top+a.bottom)/2-24)}else{var i;(i=l("templeGodPlaceholder"+e.dragging.id)).parentNode.insertBefore(s,i),i.style.display="none",e.slotGod(e.dragging,-1),PlaySound("snd/sell1.mp3",.75)}else-1!=e.dragging.slot?l("templeSlot"+e.dragging.slot).appendChild(s):l("templeGodPlaceholder"+e.dragging.id).parentNode.insertBefore(s,l("templeGodPlaceholder"+e.dragging.id)),PlaySound("snd/sell1.mp3",.75);e.dragging=!1}},e.slotHovered=-1,e.hoverSlot=function(s){e.slotHovered=s,e.dragging&&(-1==e.slotHovered?l("templeGodPlaceholder"+e.dragging.id).style.display="inline-block":l("templeGodPlaceholder"+e.dragging.id).style.display="none",PlaySound("snd/clickb"+Math.floor(7*Math.random()+1)+".mp3",.75))},Game.hasGod=function(s){for(var t=e.gods[s],o=0;o<3;o++)if(e.slot[o]==t.id)return o+1;return!1},Game.forceUnslotGod=function(s){if(-1==(s=e.gods[s]).slot)return!1;var t=l("templeGod"+s.id),o=l("templeGodPlaceholder"+s.id);return o.parentNode.insertBefore(t,o),o.style.display="none",e.slotGod(s,-1),!0},Game.useSwap=e.useSwap;var a="";for(var o in a+="<style>#templeBG{background:url(img/shadedBorders.png),url(img/BGpantheon.jpg);background-size:100% 100%,auto;position:absolute;left:0px;right:0px;top:0px;bottom:16px;}#templeContent{position:relative;box-sizing:border-box;padding:4px 24px;text-align:center;}#templeGods{text-align:center;width:100%;padding:8px;box-sizing:border-box;}.templeIcon{pointer-events:none;margin:12px 6px 0px 6px;width:48px;height:48px;opacity:0.8;position:relative;}.templeSlot .templeIcon{margin:2px 6px 0px 6px;}.templeGod{box-shadow:4px 4px 4px #000;cursor:pointer;position:relative;color:#f33;opacity:0.8;text-shadow:0px 0px 4px #000,0px 0px 6px #000;font-weight:bold;font-size:12px;display:inline-block;width:60px;height:74px;background:url(img/spellBG.png);}.templeGod.ready{color:rgba(255,255,255,0.8);opacity:1;}.templeGod.ready:hover{color:#fff;}.templeGod:hover,.templeDragged{box-shadow:6px 6px 6px 2px #000;z-index:1000000001;top:-1px;}.templeGod:active{top:1px;}.templeGod.ready .templeIcon{opacity:1;}.templeGod:hover{background-position:0px -74px;} .templeGod:active{background-position:0px 74px;}.templeGod1{background-position:-60px 0px;} .templeGod1:hover{background-position:-60px -74px;} .templeGod1:active{background-position:-60px 74px;}.templeGod2{background-position:-120px 0px;} .templeGod2:hover{background-position:-120px -74px;} .templeGod2:active{background-position:-120px 74px;}.templeGod3{background-position:-180px 0px;} .templeGod3:hover{background-position:-180px -74px;} .templeGod3:active{background-position:-180px 74px;}.templeGod:hover .templeIcon{top:-1px;}.templeGod.ready:hover .templeIcon{animation-name:bounce;animation-iteration-count:infinite;animation-duration:0.8s;}.noFancy .templeGod.ready:hover .templeIcon{animation:none;}.templeGem{z-index:100;width:24px;height:24px;}.templeEffect{font-weight:bold;font-size:11px;position:relative;margin:0px -12px;padding:4px;padding-left:28px;}.description .templeEffect{border-top:1px solid rgba(255,255,255,0.15);background:linear-gradient(to top,rgba(255,255,255,0.1),rgba(255,255,255,0));}.templeEffect .templeGem{position:absolute;left:0px;top:0px;}.templeEffectOn{text-shadow:0px 0px 6px rgba(255,255,255,0.75);color:#fff;}.templeGod .templeGem{position:absolute;left:18px;bottom:8px;pointer-events:none;}.templeGem1{background-position:-1104px -720px;}.templeGem2{background-position:-1128px -720px;}.templeGem3{background-position:-1104px -744px;}.templeSlot .templeGod,.templeSlot .templeGod:hover,.templeSlot .templeGod:active{background:none;}.templeSlotDrag{position:absolute;left:0px;top:0px;right:0px;bottom:0px;background:#999;opacity:0;cursor:pointer;}#templeDrag{position:absolute;left:0px;top:0px;z-index:1000000000000;}.templeGod{transition:transform 0.1s;}#templeDrag .templeGod{position:absolute;left:0px;top:0px;}.templeDragged{pointer-events:none;}.templeGodPlaceholder{background:red;opacity:0;display:none;width:60px;height:74px;}#templeSlots{margin:4px auto;text-align:center;}#templeSlot0{top:-4px;}#templeSlot1{top:0px;}#templeSlot2{top:4px;}#templeInfo{position:relative;display:inline-block;margin:8px auto 0px auto;padding:8px 16px;padding-left:32px;text-align:center;font-size:11px;color:rgba(255,255,255,0.75);text-shadow:-1px 1px 0px #000;background:rgba(0,0,0,0.75);border-radius:16px;}</style>",a+='<div id="templeBG"></div>',a+='<div id="templeContent">',a+='<div id="templeDrag"></div>',a+='<div id="templeSlots">',e.slot){var i=e.slot[o];a+='<div class="ready templeGod templeGod'+o%4+' templeSlot titleFont" id="templeSlot'+o+'" '+Game.getDynamicTooltip("Game.ObjectsById["+e.parent.id+"].minigame.slotTooltip("+o+")","this")+'><div class="usesIcon shadowFilter templeGem templeGem'+(parseInt(o)+1)+'"></div></div>'}for(var o in a+="</div>",a+='<div id="templeInfo"><div '+Game.getDynamicTooltip("Game.ObjectsById["+e.parent.id+"].minigame.refillTooltip","this")+' id="templeLumpRefill" class="usesIcon shadowFilter lumpRefill" style="left:-6px;top:-10px;background-position:'+"-1392px "+'-672px;"></div><div id="templeSwaps" '+Game.getTooltip('<div style="padding:8px;width:350px;font-size:11px;text-align:center;">Each time you slot a spirit, you use up one worship swap.<div class="line"></div>If you have 2 swaps left, the next one will refill after 1 hour.<br>If you have 1 swap left, the next one will refill after 4 hours.<br>If you have 0 swaps left, you will get one after 16 hours.<div class="line"></div>Unslotting a spirit costs no swaps.</div>')+">-</div></div>",a+='<div id="templeGods">',e.gods){var n=(i=e.gods[o]).icon||[0,0];a+='<div class="ready templeGod templeGod'+i.id%4+' titleFont" id="templeGod'+i.id+'" '+Game.getDynamicTooltip("Game.ObjectsById["+e.parent.id+"].minigame.godTooltip("+i.id+")","this")+'><div class="usesIcon shadowFilter templeIcon" style="background-position:'+48*-n[0]+"px "+48*-n[1]+'px;"></div><div class="templeSlotDrag" id="templeGodDrag'+i.id+'"></div></div>',a+='<div class="templeGodPlaceholder" id="templeGodPlaceholder'+i.id+'"></div>'}for(var o in a+="</div>",a+="</div>",s.innerHTML=a,e.swapsL=l("templeSwaps"),e.lumpRefill=l("templeLumpRefill"),e.gods){i=e.gods[o];AddEvent(l("templeGodDrag"+i.id),"mousedown",function(s){return function(){e.dragGod(s)}}(i)),AddEvent(l("templeGodDrag"+i.id),"mouseup",function(s){return function(){e.dropGod(s)}}(i))}for(var o in e.slot){i=e.slot[o];AddEvent(l("templeSlot"+o),"mouseover",function(s){return function(){e.hoverSlot(s)}}(o)),AddEvent(l("templeSlot"+o),"mouseout",(function(){e.hoverSlot(-1)}))}AddEvent(document,"mouseup",e.dropGod),e.refillTooltip=function(){return'<div style="padding:8px;width:300px;font-size:11px;text-align:center;">Click to refill all your worship swaps for <span class="price lump">1 sugar lump</span>.'+(Game.canRefillLump()?"<br><small>(can be done once every "+Game.sayTime(Game.getLumpRefillMax(),-1)+")</small>":'<br><small class="red">(usable again in '+Game.sayTime(Game.getLumpRefillRemaining()+Game.fps,-1)+")</small>")+"</div>"},AddEvent(e.lumpRefill,"click",(function(){e.swaps<3&&Game.refillLump(1,(function(){e.swaps=3,e.swapT=Date.now(),PlaySound("snd/pop"+Math.floor(3*Math.random()+1)+".mp3",.75)}))}))},e.save=function(){var s="";for(var t in e.slot)s+=parseFloat(e.slot[t])+"/";return s=s.slice(0,-1),s+=" "+parseFloat(e.swaps)+" "+parseFloat(e.swapT),s+=" "+parseInt(e.parent.onMinigame?"1":"0")},e.load=function(s){if(!s)return!1;var t=0,o=s.split(" "),a=o[t++].split("/")||[];for(var i in e.slot)if(-1!=parseFloat(a[i])){var n=e.godsById[parseFloat(a[i])];e.slotGod(n,i),l("templeSlot"+n.slot).appendChild(l("templeGod"+n.id))}e.swaps=parseFloat(o[t++]||3),e.swapT=parseFloat(o[t++]||Date.now()),parseInt(o[t++]||0)&&1!=Game.ascensionMode&&e.parent.switchMinigame(1)},e.reset=function(){for(var s in e.swaps=3,e.swapT=Date.now(),e.slot)e.slot[s]=-1;for(var s in e.gods){var t=e.gods[s];t.slot=-1;var o=l("templeGodPlaceholder"+t.id);o.parentNode.insertBefore(l("templeGod"+t.id),o),o.style.display="none"}},e.logic=function(){var s=36e5;0==e.swaps?s=576e5:1==e.swaps&&(s=144e5),e.swapT+s-Date.now()<=0&&e.swaps<3&&(e.swaps++,e.swapT=Date.now()),e.lastSwapT++},e.draw=function(){if(e.dragging){var s=l("templeDrag").getBoundingClientRect(),t=Game.mouseX-s.left-30,o=Game.mouseY-s.top;if(-1!=e.slotHovered){var a=l("templeSlot"+e.slotHovered).getBoundingClientRect();t=a.left-s.left,o=a.top-s.top}l("templeGod"+e.dragging.id).style.transform="translate("+t+"px,"+o+"px)"}var i=36e5;0==e.swaps?i=576e5:1==e.swaps&&(i=144e5);var n=e.swapT+i-Date.now();e.swapsL.innerHTML='Worship swaps : <span class="titleFont" style="color:'+(e.swaps>0?"#fff":"#c00")+';">'+e.swaps+"/3</span>"+(e.swaps<3?" (next in "+Game.sayTime((n/1e3+1)*Game.fps,-1)+")":"")},e.init(l("rowSpecial"+e.parent.id))};var M=0;